{"message":"ValidationError: The 'X-Forwarded-For' header is set but the Express 'trust proxy' setting is false (default). This could indicate a misconfiguration which would prevent express-rate-limit from accurately identifying users. See https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/ for more information.\n    at Object.xForwardedForHeader (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:157:13)\n    at wrappedValidations.<computed> [as xForwardedForHeader] (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:369:22)\n    at Object.keyGenerator (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:630:20)\n    at file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:682:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:663:5 {\n  code: 'ERR_ERL_UNEXPECTED_X_FORWARDED_FOR',\n  help: 'https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/'\n}\n","timestamp":"2025-07-31 12:17:49 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"🚨 Uncaught Exception: Error: listen EADDRINUSE: address already in use :::3001\n    at __node_internal_captureLargerStackTrace (node:internal/errors:496:5)\n    at __node_internal_uvExceptionWithHostPort (node:internal/errors:593:12)\n    at Server.setupListenHandle [as _listen2] (node:net:1817:16)\n    at listenInCluster (node:net:1865:12)\n    at Server.listen (node:net:1953:7)\n    at Function.listen (/var/www/telemedicine-chatbot/node_modules/express/lib/application.js:635:24)\n    at <anonymous> (/var/www/telemedicine-chatbot/server/index.ts:198:20)\n    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)\n    at async ModuleLoader.import (node:internal/modules/esm/loader:337:24)\n    at async loadESM (node:internal/process/esm_loader:34:7)\n    at async handleMainPromise (node:internal/modules/run_main:106:12) {\n  code: 'EADDRINUSE',\n  errno: -98,\n  syscall: 'listen',\n  address: '::',\n  port: 3001\n}\n","timestamp":"2025-07-31 12:24:36 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error during disconnect: TypeError: Cannot read properties of null (reading 'close')\n    at Client.destroy (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:782:31)\n    at WhatsAppService.disconnect (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:743:27)\n    at gracefulShutdown (/var/www/telemedicine-chatbot/server/index.ts:171:31)\n    at process.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:222:3)\n    at process.emit (node:events:517:28)\n    at process.emit (/var/www/telemedicine-chatbot/node_modules/tsx/dist/suppress-warnings.cjs:1:472)\n    at process._fatalException (node:internal/process/execution:169:25)\n","timestamp":"2025-07-31 12:24:36 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error clearing WhatsApp auth data: Error: EACCES: permission denied, scandir '/var/www/telemedicine-chatbot/.wwebjs_auth/session-medical-chatbot/Default/Code Cache/wasm'\n    at readdirSync (node:fs:1525:3)\n    at _rmdirSync (node:internal/fs/rimraf:250:29)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9 {\n  errno: -13,\n  syscall: 'scandir',\n  code: 'EACCES',\n  path: '/var/www/telemedicine-chatbot/.wwebjs_auth/session-medical-chatbot/Default/Code Cache/wasm'\n}\n","timestamp":"2025-07-31 12:24:36 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error disconnecting WhatsApp: TypeError: Cannot read properties of null (reading 'close')\n    at Client.destroy (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:782:31)\n    at WhatsAppService.disconnect (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:743:27)\n    at gracefulShutdown (/var/www/telemedicine-chatbot/server/index.ts:171:31)\n    at process.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:222:3)\n    at process.emit (node:events:517:28)\n    at process.emit (/var/www/telemedicine-chatbot/node_modules/tsx/dist/suppress-warnings.cjs:1:472)\n    at process._fatalException (node:internal/process/execution:169:25)\n","timestamp":"2025-07-31 12:24:37 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"🚨 Uncaught Exception: Error: listen EADDRINUSE: address already in use :::3001\n    at __node_internal_captureLargerStackTrace (node:internal/errors:496:5)\n    at __node_internal_uvExceptionWithHostPort (node:internal/errors:593:12)\n    at Server.setupListenHandle [as _listen2] (node:net:1817:16)\n    at listenInCluster (node:net:1865:12)\n    at Server.listen (node:net:1953:7)\n    at Function.listen (/var/www/telemedicine-chatbot/node_modules/express/lib/application.js:635:24)\n    at <anonymous> (/var/www/telemedicine-chatbot/server/index.ts:198:20)\n    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)\n    at async ModuleLoader.import (node:internal/modules/esm/loader:337:24)\n    at async loadESM (node:internal/process/esm_loader:34:7)\n    at async handleMainPromise (node:internal/modules/run_main:106:12) {\n  code: 'EADDRINUSE',\n  errno: -98,\n  syscall: 'listen',\n  address: '::',\n  port: 3001\n}\n","timestamp":"2025-07-31 12:24:56 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error during disconnect: TypeError: Cannot read properties of null (reading 'close')\n    at Client.destroy (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:782:31)\n    at WhatsAppService.disconnect (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:743:27)\n    at gracefulShutdown (/var/www/telemedicine-chatbot/server/index.ts:171:31)\n    at process.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:222:3)\n    at process.emit (node:events:517:28)\n    at process.emit (/var/www/telemedicine-chatbot/node_modules/tsx/dist/suppress-warnings.cjs:1:472)\n    at process._fatalException (node:internal/process/execution:169:25)\n","timestamp":"2025-07-31 12:24:56 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error clearing WhatsApp auth data: Error: EACCES: permission denied, scandir '/var/www/telemedicine-chatbot/.wwebjs_auth/session-medical-chatbot/Default/Cache'\n    at readdirSync (node:fs:1525:3)\n    at _rmdirSync (node:internal/fs/rimraf:250:29)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at Module.rmSync (node:fs:1271:10) {\n  errno: -13,\n  syscall: 'scandir',\n  code: 'EACCES',\n  path: '/var/www/telemedicine-chatbot/.wwebjs_auth/session-medical-chatbot/Default/Cache'\n}\n","timestamp":"2025-07-31 12:24:56 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error disconnecting WhatsApp: TypeError: Cannot read properties of null (reading 'close')\n    at Client.destroy (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:782:31)\n    at WhatsAppService.disconnect (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:743:27)\n    at gracefulShutdown (/var/www/telemedicine-chatbot/server/index.ts:171:31)\n    at process.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:222:3)\n    at process.emit (node:events:517:28)\n    at process.emit (/var/www/telemedicine-chatbot/node_modules/tsx/dist/suppress-warnings.cjs:1:472)\n    at process._fatalException (node:internal/process/execution:169:25)\n","timestamp":"2025-07-31 12:24:56 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"ValidationError: The Express 'trust proxy' setting is true, which allows anyone to trivially bypass IP-based rate limiting. See https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/ for more information.\n    at Object.trustProxy (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:139:13)\n    at wrappedValidations.<computed> [as trustProxy] (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:369:22)\n    at Object.keyGenerator (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:629:20)\n    at file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:682:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:663:5 {\n  code: 'ERR_ERL_PERMISSIVE_TRUST_PROXY',\n  help: 'https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/'\n}\n","timestamp":"2025-07-31 12:26:20 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ DeepSeek API attempt 1 failed: Request failed with status code 500\n","timestamp":"2025-07-31 12:26:53 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"DeepSeek health check failed: Request failed with status code 500\n","timestamp":"2025-07-31 12:26:53 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Failed to initialize WhatsApp service: ProtocolError: Protocol error (Runtime.callFunctionOn): Target closed.\n    at <anonymous> (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:400:16)\n    at new Promise (<anonymous>)\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:396:12)\n    at ExecutionContext._ExecutionContext_evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:274:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at ExecutionContext.evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:137:12) {\n  originalMessage: ''\n}\n","timestamp":"2025-07-31 12:34:25 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ Failed to initialize WhatsApp service: ProtocolError: Protocol error (Runtime.callFunctionOn): Target closed.\n    at <anonymous> (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:400:16)\n    at new Promise (<anonymous>)\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:396:12)\n    at ExecutionContext._ExecutionContext_evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:274:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at ExecutionContext.evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:137:12) {\n  originalMessage: ''\n}\n","timestamp":"2025-07-31 12:34:25 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error clearing WhatsApp auth data: Error: EACCES: permission denied, scandir '/var/www/telemedicine-chatbot/.wwebjs_auth/session-medical-chatbot/Default/Service Worker/ScriptCache'\n    at readdirSync (node:fs:1525:3)\n    at _rmdirSync (node:internal/fs/rimraf:250:29)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9 {\n  errno: -13,\n  syscall: 'scandir',\n  code: 'EACCES',\n  path: '/var/www/telemedicine-chatbot/.wwebjs_auth/session-medical-chatbot/Default/Service Worker/ScriptCache'\n}\n","timestamp":"2025-07-31 12:34:25 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Failed to initialize WhatsApp service: ProtocolError: Protocol error (Runtime.callFunctionOn): Target closed.\n    at <anonymous> (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:400:16)\n    at new Promise (<anonymous>)\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:396:12)\n    at ExecutionContext._ExecutionContext_evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:274:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at ExecutionContext.evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:137:12) {\n  originalMessage: ''\n}\n","timestamp":"2025-07-31 12:36:24 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"WhatsApp initialization error: ProtocolError: Protocol error (Runtime.callFunctionOn): Target closed.\n    at <anonymous> (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:400:16)\n    at new Promise (<anonymous>)\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:396:12)\n    at ExecutionContext._ExecutionContext_evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:274:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at ExecutionContext.evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:137:12) {\n  originalMessage: ''\n}\n","timestamp":"2025-07-31 12:36:24 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error clearing WhatsApp auth data: Error: EACCES: permission denied, scandir '/var/www/telemedicine-chatbot/.wwebjs_auth/session-medical-chatbot/Default/Service Worker/ScriptCache'\n    at readdirSync (node:fs:1525:3)\n    at _rmdirSync (node:internal/fs/rimraf:250:29)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9\n    at Array.forEach (<anonymous>)\n    at _rmdirSync (node:internal/fs/rimraf:250:7)\n    at rimrafSync (node:internal/fs/rimraf:193:7)\n    at node:internal/fs/rimraf:253:9 {\n  errno: -13,\n  syscall: 'scandir',\n  code: 'EACCES',\n  path: '/var/www/telemedicine-chatbot/.wwebjs_auth/session-medical-chatbot/Default/Service Worker/ScriptCache'\n}\n","timestamp":"2025-07-31 12:36:24 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Failed to initialize WhatsApp service: ProtocolError: Protocol error (Runtime.callFunctionOn): Target closed.\n    at <anonymous> (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:400:16)\n    at new Promise (<anonymous>)\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:396:12)\n    at ExecutionContext._ExecutionContext_evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:274:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at ExecutionContext.evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:137:12) {\n  originalMessage: ''\n}\n","timestamp":"2025-07-31 12:38:40 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"WhatsApp initialization error: ProtocolError: Protocol error (Runtime.callFunctionOn): Target closed.\n    at <anonymous> (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:400:16)\n    at new Promise (<anonymous>)\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:396:12)\n    at ExecutionContext._ExecutionContext_evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:274:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at ExecutionContext.evaluate (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/ExecutionContext.ts:137:12) {\n  originalMessage: ''\n}\n","timestamp":"2025-07-31 12:38:40 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Killed\n","timestamp":"2025-07-31 12:39:28 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"ValidationError: The Express 'trust proxy' setting is true, which allows anyone to trivially bypass IP-based rate limiting. See https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/ for more information.\n    at Object.trustProxy (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:139:13)\n    at wrappedValidations.<computed> [as trustProxy] (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:369:22)\n    at Object.keyGenerator (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:629:20)\n    at file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:682:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:663:5 {\n  code: 'ERR_ERL_PERMISSIVE_TRUST_PROXY',\n  help: 'https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/'\n}\n","timestamp":"2025-07-31 12:40:02 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"ValidationError: The Express 'trust proxy' setting is true, which allows anyone to trivially bypass IP-based rate limiting. See https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/ for more information.\n    at Object.trustProxy (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:139:13)\n    at wrappedValidations.<computed> [as trustProxy] (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:369:22)\n    at Object.keyGenerator (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:629:20)\n    at file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:682:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:663:5 {\n  code: 'ERR_ERL_PERMISSIVE_TRUST_PROXY',\n  help: 'https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/'\n}\n","timestamp":"2025-07-31 12:40:42 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Killed\n","timestamp":"2025-07-31 12:47:49 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ Failed to initialize WhatsApp service: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at initializeServices (/var/www/telemedicine-chatbot/server/index.ts:126:7)\n    at Server.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:211:3)\n","timestamp":"2025-07-31 12:48:09 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error during cleanup: TypeError: Cannot read properties of null (reading 'close')\n    at Client.destroy (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:782:31)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:344:29)\n    at initializeServices (/var/www/telemedicine-chatbot/server/index.ts:126:7)\n    at Server.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:211:3)\n","timestamp":"2025-07-31 12:48:09 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ Failed to initialize WhatsApp service: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at initializeServices (/var/www/telemedicine-chatbot/server/index.ts:126:7)\n    at Server.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:211:3)\n","timestamp":"2025-07-31 12:48:09 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ Failed to initialize WhatsApp service: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at initializeServices (/var/www/telemedicine-chatbot/server/index.ts:126:7)\n    at Server.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:211:3)\n","timestamp":"2025-07-31 12:48:57 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error during cleanup: TypeError: Cannot read properties of null (reading 'close')\n    at Client.destroy (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:782:31)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:344:29)\n    at initializeServices (/var/www/telemedicine-chatbot/server/index.ts:126:7)\n    at Server.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:211:3)\n","timestamp":"2025-07-31 12:48:57 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ Failed to initialize WhatsApp service: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at initializeServices (/var/www/telemedicine-chatbot/server/index.ts:126:7)\n    at Server.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:211:3)\n","timestamp":"2025-07-31 12:48:57 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ Failed to initialize WhatsApp service: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at initializeServices (/var/www/telemedicine-chatbot/server/index.ts:126:7)\n    at Server.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:211:3)\n","timestamp":"2025-07-31 12:49:17 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error during cleanup: TypeError: Cannot read properties of null (reading 'close')\n    at Client.destroy (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:782:31)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:344:29)\n    at initializeServices (/var/www/telemedicine-chatbot/server/index.ts:126:7)\n    at Server.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:211:3)\n","timestamp":"2025-07-31 12:49:17 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ Failed to initialize WhatsApp service: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at initializeServices (/var/www/telemedicine-chatbot/server/index.ts:126:7)\n    at Server.<anonymous> (/var/www/telemedicine-chatbot/server/index.ts:211:3)\n","timestamp":"2025-07-31 12:49:17 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"ValidationError: The Express 'trust proxy' setting is true, which allows anyone to trivially bypass IP-based rate limiting. See https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/ for more information.\n    at Object.trustProxy (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:139:13)\n    at wrappedValidations.<computed> [as trustProxy] (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:369:22)\n    at Object.keyGenerator (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:629:20)\n    at file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:682:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:663:5 {\n  code: 'ERR_ERL_PERMISSIVE_TRUST_PROXY',\n  help: 'https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/'\n}\n","timestamp":"2025-07-31 12:49:50 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"ValidationError: The Express 'trust proxy' setting is true, which allows anyone to trivially bypass IP-based rate limiting. See https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/ for more information.\n    at Object.trustProxy (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:139:13)\n    at wrappedValidations.<computed> [as trustProxy] (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:369:22)\n    at Object.keyGenerator (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:629:20)\n    at file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:682:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:663:5 {\n  code: 'ERR_ERL_PERMISSIVE_TRUST_PROXY',\n  help: 'https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/'\n}\n","timestamp":"2025-07-31 12:51:44 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ Failed to initialize WhatsApp service: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at <anonymous> (/var/www/telemedicine-chatbot/server/routes/whatsapp.ts:16:5)\n","timestamp":"2025-07-31 12:52:15 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error during cleanup: TypeError: Cannot read properties of null (reading 'close')\n    at Client.destroy (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:782:31)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:344:29)\n    at <anonymous> (/var/www/telemedicine-chatbot/server/routes/whatsapp.ts:16:5)\n","timestamp":"2025-07-31 12:52:15 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"WhatsApp initialization error: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at <anonymous> (/var/www/telemedicine-chatbot/server/routes/whatsapp.ts:16:5)\n","timestamp":"2025-07-31 12:52:15 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"❌ Failed to initialize WhatsApp service: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at <anonymous> (/var/www/telemedicine-chatbot/server/routes/whatsapp.ts:16:5)\n","timestamp":"2025-07-31 12:53:51 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"Error during cleanup: TypeError: Cannot read properties of null (reading 'close')\n    at Client.destroy (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:782:31)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:344:29)\n    at <anonymous> (/var/www/telemedicine-chatbot/server/routes/whatsapp.ts:16:5)\n","timestamp":"2025-07-31 12:53:51 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"WhatsApp initialization error: Error: Protocol error (Network.setUserAgentOverride): Session closed. Most likely the page has been closed.\n    at CDPSessionImpl.send (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Connection.ts:379:9)\n    at NetworkManager.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/NetworkManager.ts:224:24)\n    at CDPPage.setUserAgent (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/node_modules/puppeteer-core/src/common/Page.ts:1229:46)\n    at Client.initialize (/var/www/telemedicine-chatbot/node_modules/whatsapp-web.js/src/Client.js:300:20)\n    at WhatsAppService.initialize (/var/www/telemedicine-chatbot/server/lib/whatsapp-service.ts:330:7)\n    at <anonymous> (/var/www/telemedicine-chatbot/server/routes/whatsapp.ts:16:5)\n","timestamp":"2025-07-31 12:53:51 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"ValidationError: The Express 'trust proxy' setting is true, which allows anyone to trivially bypass IP-based rate limiting. See https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/ for more information.\n    at Object.trustProxy (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:139:13)\n    at wrappedValidations.<computed> [as trustProxy] (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:369:22)\n    at Object.keyGenerator (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:629:20)\n    at file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:682:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:663:5 {\n  code: 'ERR_ERL_PERMISSIVE_TRUST_PROXY',\n  help: 'https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/'\n}\n","timestamp":"2025-07-31 12:58:43 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"ValidationError: The Express 'trust proxy' setting is true, which allows anyone to trivially bypass IP-based rate limiting. See https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/ for more information.\n    at Object.trustProxy (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:139:13)\n    at wrappedValidations.<computed> [as trustProxy] (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:369:22)\n    at Object.keyGenerator (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:629:20)\n    at file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:682:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:663:5 {\n  code: 'ERR_ERL_PERMISSIVE_TRUST_PROXY',\n  help: 'https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/'\n}\n","timestamp":"2025-07-31 12:59:06 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
{"message":"ValidationError: The Express 'trust proxy' setting is true, which allows anyone to trivially bypass IP-based rate limiting. See https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/ for more information.\n    at Object.trustProxy (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:139:13)\n    at wrappedValidations.<computed> [as trustProxy] (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:369:22)\n    at Object.keyGenerator (file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:629:20)\n    at file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:682:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///var/www/telemedicine-chatbot/node_modules/express-rate-limit/dist/index.mjs:663:5 {\n  code: 'ERR_ERL_PERMISSIVE_TRUST_PROXY',\n  help: 'https://express-rate-limit.github.io/ERR_ERL_PERMISSIVE_TRUST_PROXY/'\n}\n","timestamp":"2025-07-31 13:14:19 +07:00","type":"err","process_id":0,"app_name":"telemedicine-chatbot"}
